{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?7e02","webpack:///./src/components/Upload/index.vue?9685","webpack:///./src/components/Preview/index.vue?490b","webpack:///./src/App.vue?e5a0","webpack:///./src/components/Upload/index.vue?192c","webpack:///./src/components/Material/index.vue?a699","webpack:///./src/api/common/material.js","webpack:///./src/api/common/file.js","webpack:///./src/utils/index.js","webpack:///./src/components/Pagination/index.vue?cd73","webpack:///src/components/Pagination/index.vue","webpack:///./src/components/Pagination/index.vue?7cce","webpack:///./src/components/Pagination/index.vue","webpack:///./src/components/Preview/index.vue?8e06","webpack:///src/components/Preview/index.vue","webpack:///./src/components/Preview/index.vue?b947","webpack:///./src/components/Preview/index.vue","webpack:///./src/utils/clipboard.js","webpack:///./src/mixins/upload.js","webpack:///src/components/Material/index.vue","webpack:///./src/components/Material/index.vue?77eb","webpack:///./src/components/Material/index.vue","webpack:///./src/directives/imgBg.js","webpack:///src/components/Upload/index.vue","webpack:///./src/components/Upload/index.vue?3b01","webpack:///./src/components/Upload/index.vue","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue","webpack:///./src/plugins/element.js","webpack:///./src/main.js","webpack:///./src/assets/img/video_cover.png","webpack:///./src/components/Material/index.vue?ccde"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","model","callback","$$v","src","expression","staticRenderFns","staticClass","fileList","uploadNum","isUpload","on","$event","materialVisible","type","_v","_e","class","_l","item","index","directives","rawName","getThumbnail","q_t","videoPreview","_m","removeFile","pictureCardPreview","media","materialSend","previewUrl","previewVisible","activeName","imageParams","$set","isManager","loadList","slot","manager","items","id","checked","status","selectFile","data_url","cover","q_w","q_h","u_w","file_name","nativeOn","preview","handleCopy","deleteItem","_s","_f","file_size","total","page_size","pageSizeChange","pageCurrentChange","changeFile","uploadFile","uploadChange","visible","selectOk","previewTitle","previewType","previewDialogVisible","getMaterialList","params","Promise","resolve","addMaterial","deleteMaterial","getFileSign","getMediaId","getFileUploadUrl","bytesToSize","bytes","k","sizes","Math","floor","log","pow","toPrecision","videoCover","require","url","opts","split","assign","indexOf","q_c","currentPage","pageSizes","pageSize","props","methods","$emit","val","watch","parseInt","component","previewThumbnail","Boolean","default","Number","title","String","computed","types","1","2","clipboardSuccess","Vue","$message","message","duration","clipboardError","handleClipboard","text","event","clipboard","Clipboard","target","off","destroy","onClick","cosInfo","uploadImgUrl","uploadVideoUrl","imgHost","undefined","videoHost","cos","created","initCos","COS","getAuthorization","options","method","Method","toLowerCase","pathname","Key","getFileType","site","then","res","authorization","upload_url","show_url","bucket","region","uploadTecent","file","reject","getTempFileKey","console","putObject","Bucket","Region","Body","onProgress","progressData","uploading","err","error","fileItem","includes","size","fileName","platform","app","$store","getters","system","empNo","userInfo","emp_no","randomString","Hashes","SHA1","hex","Date","now","toString","extName","dialogImageUrl","dialogVisible","materialDialogVisible","videos","per_page","page","sort","listLoading","selects","curIndex","tempFiles","components","mixins","upload","reset","search","$confirm","confirmButtonText","cancelButtonText","keys","warning","selectsNum","emitData","values","getMediaIds","map","spinner","fullscreen","background","exceedTip","flag","percentage","percent","uploadSuccess","filters","inserted","bgChange","update","el","dataset","style","backgroundImage","backgroundSize","backgroundPosition","bg","Array","multiple","urls","concat","v","Upload","use","Element","config","productionTip","render","h","App","$mount"],"mappings":"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","file":"js/app.06564dc4.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=scss&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('upload',{model:{value:(_vm.src),callback:function ($$v) {_vm.src=$$v},expression:\"src\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wm-upload\"},[(_vm.fileList.length != _vm.uploadNum && _vm.isUpload)?_c('span',{on:{\"click\":function($event){_vm.materialVisible = true}}},[( _vm.type<3)?_c('div',{staticClass:\"el-upload el-upload--picture-card\"},[_c('i',{staticClass:\"el-icon-plus\"})]):(_vm.type!==1)?_c('el-button',{attrs:{\"size\":\"mini\"}},[_vm._v(\"选择文件\")]):_vm._e()],1):_vm._e(),_c('ul',{staticClass:\"el-upload-list\",class:_vm.type<3? 'el-upload-list--picture-card':'el-upload-list--text'},_vm._l((_vm.fileList),function(item,index){return _c('li',{directives:[{name:\"bg\",rawName:\"v-bg\"}],key:item,staticClass:\"el-upload-list__item is-success\",attrs:{\"tabindex\":\"0\",\"data-url\":_vm.type < 3 ? _vm.getThumbnail( _vm.type === 1 ? item : '', {q_t:5}) : ''}},[_c('a',{staticClass:\"el-upload-list__item-name\",on:{\"click\":function($event){return _vm.videoPreview(item, index)}}},[_c('i',{staticClass:\"el-icon-document\"})]),_vm._m(0,true),(_vm.isUpload)?_c('i',{staticClass:\"el-icon-close\",on:{\"click\":function($event){return _vm.removeFile(item,index)}}}):_vm._e(),_c('i',{staticClass:\"el-icon-close-tip\"},[_vm._v(\"按 delete 键可删除\")]),_c('span',{staticClass:\"el-upload-list__item-actions\"},[_c('span',{staticClass:\"el-upload-list__item-preview\",on:{\"click\":function($event){return _vm.pictureCardPreview(item, index)}}},[_c('i',{staticClass:\"el-icon-zoom-in\"})]),(_vm.isUpload)?_c('span',{staticClass:\"el-upload-list__item-delete\",on:{\"click\":function($event){return _vm.removeFile(item,index)}}},[_c('i',{staticClass:\"el-icon-delete\"})]):_vm._e()])])}),0),_c('el-dialog',{attrs:{\"append-to-body\":\"\",\"title\":\"选择文件\",\"top\":\"10vh\",\"visible\":_vm.materialVisible,\"width\":\"990px\"},on:{\"update:visible\":function($event){_vm.materialVisible=$event}}},[_c('material',{attrs:{\"type\":_vm.type,\"upload-num\":_vm.uploadNum - _vm.fileList.length,\"media\":_vm.media},on:{\"on-send\":_vm.materialSend},model:{value:(_vm.materialVisible),callback:function ($$v) {_vm.materialVisible=$$v},expression:\"materialVisible\"}})],1),_c('preview',{attrs:{\"url\":_vm.previewUrl,\"type\":_vm.type},model:{value:(_vm.previewVisible),callback:function ($$v) {_vm.previewVisible=$$v},expression:\"previewVisible\"}})],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{staticClass:\"el-upload-list__item-status-label\"},[_c('i',{staticClass:\"el-icon-upload-success el-icon-check\"})])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-tabs',{attrs:{\"type\":\"card\"},model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},[_c('el-tab-pane',{attrs:{\"label\":\"素材库\",\"name\":\"material\"}},[_c('el-row',{staticClass:\"mb10\"},[_c('el-col',{attrs:{\"span\":12}},[_c('el-input',{staticClass:\"input-with-select\",attrs:{\"size\":\"small\",\"placeholder\":\"请输入关键字\",\"clearable\":\"\"},model:{value:(_vm.imageParams.key),callback:function ($$v) {_vm.$set(_vm.imageParams, \"key\", $$v)},expression:\"imageParams.key\"}},[(_vm.isManager)?_c('el-select',{attrs:{\"slot\":\"prepend\",\"disabled\":!_vm.isManager},on:{\"change\":function($event){return _vm.loadList(true)}},slot:\"prepend\",model:{value:(_vm.imageParams.type),callback:function ($$v) {_vm.$set(_vm.imageParams, \"type\", $$v)},expression:\"imageParams.type\"}},[_c('el-option',{attrs:{\"label\":\"图片\",\"value\":1}}),_c('el-option',{attrs:{\"label\":\"视频\",\"value\":2}}),_c('el-option',{attrs:{\"label\":\"文件\",\"value\":3}})],1):_vm._e(),_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":function($event){return _vm.loadList(true)}},slot:\"append\"})],1)],1),_c('el-col',{staticClass:\"tr\",attrs:{\"span\":12}},[_c('el-radio-group',{attrs:{\"size\":\"small\"},on:{\"change\":function($event){return _vm.loadList(true)}},model:{value:(_vm.imageParams.sort),callback:function ($$v) {_vm.$set(_vm.imageParams, \"sort\", $$v)},expression:\"imageParams.sort\"}},[_c('el-radio-button',{attrs:{\"label\":\"1\"}},[_vm._v(\"默认\")]),_c('el-radio-button',{attrs:{\"label\":\"2\"}},[_vm._v(\"时间\")])],1)],1)],1),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.listLoading),expression:\"listLoading\"}]},[_c('div',{staticClass:\"wm-files\",class:{manager: _vm.isManager}},[(_vm.items.length ==0)?_c('el-alert',{attrs:{\"title\":\"暂无数据\",\"type\":\"info\",\"center\":\"\",\"show-icon\":\"\"}}):_c('el-row',{attrs:{\"gutter\":10}},_vm._l((_vm.items),function(item,index){return _c('el-col',{key:item.id,attrs:{\"span\":_vm.isManager ? 2: 4}},[_c('div',{staticClass:\"item\"},[_c('div',{staticClass:\"file\"},[_c('div',{class:{checked: item.status},on:{\"click\":function($event){return _vm.selectFile(item, index)}}},[(_vm.imageParams.type !=3)?_c('img',{attrs:{\"src\":_vm.getThumbnail((_vm.imageParams.type ==1 ? item.data_url : item.cover) || '', {q_w:145,q_h:145,q_t:5,u_w:200}),\"alt\":item.file_name}}):_vm._e(),(_vm.imageParams.type==2)?_c('i',{staticClass:\"el-icon-caret-right play-icon\"}):_vm._e(),(_vm.imageParams.type ==3)?_c('i',{staticClass:\"el-icon-document\"}):_vm._e(),_c('i',{staticClass:\"el-icon-check\"})]),_c('el-row',{staticClass:\"action\"},[_c('el-col',{attrs:{\"span\":8},nativeOn:{\"click\":function($event){return _vm.preview(item)}}},[_c('i',{staticClass:\"el-icon-zoom-in\"})]),_c('el-col',{attrs:{\"span\":8},nativeOn:{\"click\":function($event){return _vm.handleCopy(item.data_url ,$event)}}},[_c('i',{staticClass:\"el-icon-share\"})]),_c('el-col',{attrs:{\"span\":8},nativeOn:{\"click\":function($event){return _vm.deleteItem(item, index)}}},[_c('i',{staticClass:\"el-icon-delete\"})])],1)],1),_c('el-tooltip',{attrs:{\"effect\":\"dark\",\"placement\":\"bottom\"}},[_c('p',{staticClass:\"ellipsis\"},[_vm._v(_vm._s(item.file_name))]),_c('div',{attrs:{\"slot\":\"content\"},slot:\"content\"},[_vm._v(\" 文件名：\"+_vm._s(item.file_name)+\" \"),_c('br'),_vm._v(\" 大小：\"+_vm._s(_vm._f(\"bytesToSize\")(item.file_size))+\" \")])])],1)])}),1)],1)]),_c('wm-pagination',{attrs:{\"total\":_vm.total,\"page-size\":_vm.imageParams.page_size},on:{\"size-change\":_vm.pageSizeChange,\"current-change\":_vm.pageCurrentChange},model:{value:(_vm.imageParams.page),callback:function ($$v) {_vm.$set(_vm.imageParams, \"page\", $$v)},expression:\"imageParams.page\"}})],1),_c('el-tab-pane',{attrs:{\"label\":\"本地上传\",\"name\":\"upload\"}},[_c('el-upload',{staticClass:\"upload-demo\",attrs:{\"drag\":\"\",\"action\":\"\",\"http-request\":_vm.changeFile,\"before-remove\":_vm.removeFile,\"file-list\":_vm.uploadFile,\"on-change\":_vm.uploadChange,\"multiple\":_vm.uploadNum !== 1}},[_c('i',{staticClass:\"el-icon-upload\"}),_c('div',{staticClass:\"el-upload__text\"},[_vm._v(\" 将文件拖到此处，或 \"),_c('em',[_vm._v(\"点击上传\")])])])],1)],1),(!_vm.isManager)?[(_vm.activeName === 'material' || (_vm.activeName === 'file' && _vm.uploadNum === 1) )?_c('div',{staticClass:\"dialog-footer tr\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.visible=false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.selectOk}},[_vm._v(\"确 定\")])],1):_vm._e()]:_vm._e(),_c('preview',{attrs:{\"title\":_vm.previewTitle,\"url\":_vm.previewUrl,\"type\":_vm.previewType},model:{value:(_vm.previewDialogVisible),callback:function ($$v) {_vm.previewDialogVisible=$$v},expression:\"previewDialogVisible\"}})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// import { http } from '@/utils/axios'\r\n// import stroe from '@/store'\r\n\r\n// const system = stroe.getters.system\r\n// var path = system === 'podcasts' ? 'space/' : ''\r\n// 获取素材列表\r\nexport function getMaterialList(params) {\r\n  return new Promise((resolve)=>{\r\n    resolve({params})\r\n  })\r\n}\r\n\r\n// 添加素材\r\nexport function addMaterial(params) {\r\n  return new Promise((resolve)=>{\r\n    resolve({params})\r\n  })\r\n}\r\n\r\n// 删除素材信息\r\nexport function deleteMaterial(id) {\r\n  return new Promise((resolve)=>{\r\n    resolve({id})\r\n  })\r\n}\r\n","\r\n\r\n// 获取获取腾讯云对象存储签名\r\nexport function getFileSign(params) {\r\n  return new Promise((resolve)=>{\r\n    resolve({params})\r\n  })\r\n}\r\n\r\n// 获取获腾讯公众平台临时素材media_id\r\nexport function getMediaId(id) {\r\n  return new Promise((resolve)=>{\r\n    resolve({id})\r\n  })\r\n}\r\n\r\n// 获取获取腾讯云对象存储  上传地址\r\nexport function getFileUploadUrl(params) {\r\n  return new Promise((resolve)=>{\r\n    resolve({params})\r\n  })\r\n}\r\n","/**\r\n * Features: utils 常用功能集合\r\n * Author: xianwen.yu\r\n * Time: 2017-12-20\r\n */\r\n\r\n// 字节转\r\nexport function bytesToSize(bytes) {\r\n  if (bytes === 0) {\r\n    return '0 B'\r\n  }\r\n  var k = 1000 // or 1024\r\n  var sizes = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\r\n  var i = Math.floor(Math.log(bytes) / Math.log(k))\r\n  return (bytes / Math.pow(k, i)).toPrecision(3) + ' ' + sizes[i]\r\n}\r\n\r\n/**\r\n *\r\n *\r\n * @export\r\n * @param {*} func\r\n * @param {*} wait\r\n * @param {*} immediate\r\n */\r\nexport function debounce(func, wait, immediate) {\r\n  let timeout, args, context, timestamp, result\r\n\r\n  const later = function() {\r\n    // 据上一次触发时间间隔\r\n    const last = +new Date() - timestamp\r\n\r\n    // 上次被包装函数被调用时间间隔last小于设定时间间隔wait\r\n    if (last < wait && last > 0) {\r\n      timeout = setTimeout(later, wait - last)\r\n    } else {\r\n      timeout = null\r\n      // 如果设定为immediate===true，因为开始边界已经调用过了此处无需调用\r\n      if (!immediate) {\r\n        result = func.apply(context, args)\r\n        if (!timeout) context = args = null\r\n      }\r\n    }\r\n  }\r\n\r\n  return function(...args) {\r\n    context = this\r\n    timestamp = +new Date()\r\n    const callNow = immediate && !timeout\r\n    // 如果延时不存在，重新设定延时\r\n    if (!timeout) timeout = setTimeout(later, wait)\r\n    if (callNow) {\r\n      result = func.apply(context, args)\r\n      context = args = null\r\n    }\r\n\r\n    return result\r\n  }\r\n}\r\n\r\n/**\r\n * @desc 函数节流\r\n * @param func 函数\r\n * @param wait 延迟执行毫秒数\r\n * @param type 1 表时间戳版，2 表定时器版\r\n */\r\nexport function throttle(func, wait = 1000, type = 1) {\r\n  if (type === 1) {\r\n    var previous = 0\r\n  } else if (type === 2) {\r\n    var timeout\r\n  }\r\n\r\n  return function() {\r\n    var context = this\r\n    var args = arguments\r\n    if (type === 1) {\r\n      var now = Date.now()\r\n\r\n      if (now - previous > wait) {\r\n        func.apply(context, args)\r\n        previous = now\r\n      }\r\n    } else if (type === 2) {\r\n      if (!timeout) {\r\n        timeout = setTimeout(function() {\r\n          timeout = null\r\n          func.apply(context, args)\r\n        }, wait)\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nlet videoCover = require('@/assets/img/video_cover.png')\r\n// 获取缩略图地址\r\nexport function getThumbnail(url, opts = {}) {\r\n  var params\r\n  if (url) {\r\n    // console.log(url)\r\n    url = url.split('?')\r\n    params = url[1] || ''\r\n    url = url[0]\r\n  }\r\n  opts = Object.assign({ u_w: 200, q_w: 200, q_h: 200, q_t: 2 }, opts)\r\n  if (!url) {\r\n    // url = '/assets/img/default_video_poster.jpg'\r\n    url = videoCover\r\n  } else if (url.indexOf('.upaiyun.com/') > -1) {\r\n    url += `!W${opts.u_w || 200}?${params}`\r\n  } else {\r\n    if (opts.q_w || opts.q_h) {\r\n      url += `?imageView2/${opts.q_t || 2}/w/${opts.q_w || 200}/h/${opts.q_h ||\r\n        200}${params ? '&' + params : ''}`\r\n    } else {\r\n      url += opts.q_c\r\n      url += `${opts.q_c + (params ? '&' + params : '')}`\r\n    }\r\n  }\r\n  return url\r\n}\r\n\r\nexport function isExternal(path) {\r\n  return /^(https?:|mailto:|tel:)/.test(path)\r\n}\r\n\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-pagination',{attrs:{\"current-page\":_vm.currentPage,\"page-sizes\":_vm.pageSizes,\"page-size\":_vm.pageSize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.pageSizeChange,\"current-change\":_vm.pageCurrentChange,\"update:currentPage\":function($event){_vm.currentPage=$event},\"update:current-page\":function($event){_vm.currentPage=$event}}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-pagination @size-change=\"pageSizeChange\" @current-change=\"pageCurrentChange\" :current-page.sync=\"currentPage\" :page-sizes=\"pageSizes\" :page-size=\"pageSize\" layout=\"total, sizes, prev, pager, next, jumper\" :total=\"total\">\r\n  </el-pagination>\r\n</template>\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      pageSizes: [20, 40, 60, 80, 100],\r\n      currentPage: this.value\r\n    }\r\n  },\r\n  props: ['pageSize', 'value', 'total'],\r\n  methods: {\r\n    // 改变每页数量\r\n    pageSizeChange(val) {\r\n      this.$emit('size-change', val)\r\n    },\r\n    // 改变页数\r\n    pageCurrentChange(val) {\r\n      this.$emit('current-change', val)\r\n    }\r\n  },\r\n  watch: {\r\n    value() {\r\n      this.currentPage = parseInt(this.value)\r\n    },\r\n    currentPage(val) {\r\n      this.$emit('input', val)\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=b9fa5ea4&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{staticClass:\"wm-preview\",attrs:{\"title\":_vm.previewTitle,\"visible\":_vm.visible,\"append-to-body\":\"\"},on:{\"update:visible\":function($event){_vm.visible=$event}}},[(_vm.url)?_c('div',{staticClass:\"p10\"},[(_vm.type===1)?[_c('img',{attrs:{\"src\":_vm.previewThumbnail,\"alt\":\"\"}}),_c('div',{staticClass:\"tc\"},[_c('a',{staticClass:\"link-type\",attrs:{\"href\":_vm.url,\"target\":\"_blank\"}},[_vm._v(\"查看原图\")])])]:_vm._e(),(_vm.type ===2)?_c('video',{attrs:{\"src\":_vm.url,\"controls\":\"\",\"autoplay\":\"\"}}):_vm._e()],2):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-dialog :title=\"previewTitle\" class=\"wm-preview\" :visible.sync=\"visible\" append-to-body>\r\n    <div class=\"p10\" v-if=\"url\">\r\n      <template v-if=\"type===1\">\r\n        <img :src=\"previewThumbnail\" alt>\r\n        <div class=\"tc\">\r\n          <a class=\"link-type\" :href=\"url\" target=\"_blank\">查看原图</a>\r\n        </div>\r\n      </template>\r\n      <video v-if=\"type ===2\" :src=\"url\" controls autoplay></video>\r\n    </div>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport { getThumbnail } from '@/utils'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      visible: this.value\r\n    }\r\n  },\r\n  props: {\r\n    value: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    type: {\r\n      type: Number,\r\n      default: 1\r\n    },\r\n    title: {\r\n      type: String\r\n    },\r\n    url: {\r\n      type: String\r\n    }\r\n  },\r\n  computed: {\r\n    previewTitle() {\r\n      if (this.title) {\r\n        return this.title\r\n      } else {\r\n        var types = {\r\n          1: '图片',\r\n          2: '视频'\r\n        }\r\n        return types[this.type] + '预览'\r\n      }\r\n    },\r\n    previewThumbnail() {\r\n      return this.visible ? (this.type === 1 ? getThumbnail(this.url, { q_w: 800, q_h: 800, u_w: 640 }) : this.url) : ''\r\n    }\r\n  },\r\n  watch: {\r\n    value(val) {\r\n      this.visible = val\r\n    },\r\n    visible(val) {\r\n      this.$emit('input', val)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.wm-preview {\r\n  text-align: center;\r\n  img,\r\n  video {\r\n    max-width: 100%;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=297eb54f&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\r\nimport Clipboard from 'clipboard'\r\n\r\nfunction clipboardSuccess() {\r\n  Vue.prototype.$message({\r\n    message: 'Copy successfully',\r\n    type: 'success',\r\n    duration: 1500\r\n  })\r\n}\r\n\r\nfunction clipboardError() {\r\n  Vue.prototype.$message({\r\n    message: 'Copy failed',\r\n    type: 'error'\r\n  })\r\n}\r\n\r\nexport default function handleClipboard(text, event) {\r\n  const clipboard = new Clipboard(event.target, {\r\n    text: () => text\r\n  })\r\n  clipboard.on('success', () => {\r\n    clipboardSuccess()\r\n    clipboard.off('error')\r\n    clipboard.off('success')\r\n    clipboard.destroy()\r\n  })\r\n  clipboard.on('error', () => {\r\n    clipboardError()\r\n    clipboard.off('error')\r\n    clipboard.off('success')\r\n    clipboard.destroy()\r\n  })\r\n  clipboard.onClick(event)\r\n}\r\n","\r\n/* eslint-disable */\r\nimport COS from 'cos-js-sdk-v5'\r\n// import { randomWord } from '@/utils'\r\nimport { getFileSign, getFileUploadUrl } from '@/api/common/file'\r\nimport Hashes from 'jshashes'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      cosInfo: null,\r\n      uploadImgUrl: '',\r\n      uploadVideoUrl: '',\r\n      imgHost: undefined,\r\n      videoHost: undefined,\r\n      cos: null\r\n    }\r\n  },\r\n  created() {\r\n    this.initCos()\r\n  },\r\n  methods: {\r\n    // 初始化腾讯云对象存储实例\r\n    initCos() {\r\n      this.cos = new COS({\r\n        getAuthorization: (options, callback) => {\r\n          // 异步获取签名\r\n          getFileSign({\r\n            method: (options.Method || 'get').toLowerCase(),\r\n            pathname: '/' + (options.Key || ''),\r\n            type: this.getFileType(),\r\n            site: 'qcloud'\r\n          }).then(res => {\r\n            callback(res.data.data.authorization)\r\n          })\r\n        }\r\n      })\r\n    },\r\n\r\n    // 获取上传地址\r\n    async getFileUploadUrl() {\r\n      var data, res\r\n      switch (this.getFileType()) {\r\n        case 'img':\r\n        case 'open_img':\r\n          if (!this.uploadImgUrl) {\r\n            res = await getFileUploadUrl({ type: this.getFileType() })\r\n            data = res.data.data\r\n            this.uploadImgUrl = data.upload_url\r\n            this.imgHost = data.show_url\r\n            this.cosInfo = {\r\n              bucket: data.bucket,\r\n              region: data.region\r\n            }\r\n            return true\r\n          } else {\r\n            return true\r\n          }\r\n        case 'video':\r\n          if (!this.uploadVideoUrl) {\r\n            res = await getFileUploadUrl({ type: this.getFileType() })\r\n            data = res.data.data\r\n            this.uploadVideoUrl = data.upload_url\r\n            this.videoHost = data.show_url\r\n            this.cosInfo = {\r\n              bucket: data.bucket,\r\n              region: data.region\r\n            }\r\n            return true\r\n          } else {\r\n            return true\r\n          }\r\n        case 'pan':\r\n          return false\r\n        default:\r\n          return false\r\n      }\r\n    },\r\n    // 文件上传到腾讯COS\r\n    async uploadTecent(file) {\r\n      // 文件上传之前的一些处理\r\n      // 生成文件key\r\n      if (await this.getFileUploadUrl()) {\r\n        return new Promise((resolve, reject) => {\r\n          var key = this.getTempFileKey(file.name)\r\n          console.log(key)\r\n          this.cos.putObject(\r\n            {\r\n              Bucket: this.cosInfo.bucket,\r\n              Region: this.cosInfo.region,\r\n              Key: key,\r\n              Body: file,\r\n              onProgress: progressData => {\r\n                console.log('上传进度：', progressData)\r\n                this.uploading && this.uploading(progressData)\r\n              }\r\n            },\r\n            (err, data) => {\r\n              // fileInfo.up_dateline = Date.parse(new Date()) / 1000;\r\n              if (err) {\r\n                console.log('上传错误:', err)\r\n                this.$message.error('cos_error:' + (err.error || '上传错误！'))\r\n                reject(err)\r\n              } else {\r\n                console.log('上传成功:', data, data.name, file)\r\n                var fileItem = {\r\n                  data_url:\r\n                    (['img', 'open_img'].includes(this.getFileType())\r\n                      ? this.imgHost\r\n                      : this.videoHost) + key,\r\n                  file_name: file.name,\r\n                  file_size: file.size,\r\n                  type: ['img', 'open_img'].includes(this.getFileType())\r\n                    ? 1\r\n                    : 2,\r\n                  key,\r\n                  bucket: this.cosInfo.bucket\r\n                }\r\n                resolve(fileItem)\r\n              }\r\n            }\r\n          )\r\n        })\r\n      } else {\r\n        return false\r\n      }\r\n    },\r\n    // 生成文件key\r\n    getTempFileKey(fileName) {\r\n      var platform = 'pc'\r\n      var app = this.$store.getters.system\r\n      var empNo = this.$store.getters.userInfo.emp_no\r\n      // var md5 = randomWord(false, 32)\r\n      var randomString = new Hashes.SHA1().hex(Date.now().toString())\r\n      var extName = fileName.split('.')\r\n      var index = extName.length - 1\r\n      extName = index ? '.' + extName[index] : ''\r\n      return `${platform}.${app}.${empNo}.${randomString + extName}`\r\n    },\r\n    removeFile(file, fileList) {\r\n      console.log('removeFile')\r\n      return false\r\n    }\r\n  }\r\n}\r\n","<template>\r\n  <div>\r\n    <el-tabs v-model=\"activeName\" type=\"card\">\r\n      <el-tab-pane label=\"素材库\" name=\"material\">\r\n        <el-row class=\"mb10\">\r\n          <el-col :span=\"12\">\r\n            <el-input class=\"input-with-select\" size=\"small\" v-model=\"imageParams.key\" placeholder=\"请输入关键字\" clearable>\r\n              <el-select v-if=\"isManager\" :disabled=\"!isManager\" v-model=\"imageParams.type\" slot=\"prepend\" @change=\"loadList(true)\">\r\n                <el-option label=\"图片\" :value=\"1\"></el-option>\r\n                <el-option label=\"视频\" :value=\"2\"></el-option>\r\n                <el-option label=\"文件\" :value=\"3\"></el-option>\r\n              </el-select>\r\n              <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"loadList(true)\"></el-button>\r\n            </el-input>\r\n          </el-col>\r\n          <el-col class=\"tr\" :span=\"12\">\r\n            <el-radio-group size=\"small\" v-model=\"imageParams.sort\" @change=\"loadList(true)\">\r\n              <el-radio-button label=\"1\">默认</el-radio-button>\r\n              <el-radio-button label=\"2\">时间</el-radio-button>\r\n            </el-radio-group>\r\n          </el-col>\r\n        </el-row>\r\n        <div v-loading=\"listLoading\">\r\n          <div class=\"wm-files\" :class=\"{manager: isManager}\">\r\n            <el-alert v-if=\"items.length ==0\" title=\"暂无数据\" type=\"info\" center show-icon></el-alert>\r\n            <el-row :gutter=\"10\" v-else>\r\n              <el-col v-for=\"(item,index) in items\" :key=\"item.id\" :span=\"isManager ? 2: 4\">\r\n                <div class=\"item\">\r\n                  <div class=\"file\">\r\n                    <div @click=\"selectFile(item, index)\" :class=\"{checked: item.status}\">\r\n                      <img\r\n                        :src=\"getThumbnail((imageParams.type ==1 ? item.data_url : item.cover) || '', {q_w:145,q_h:145,q_t:5,u_w:200})\"\r\n                        :alt=\"item.file_name\"\r\n                        v-if=\"imageParams.type !=3\"\r\n                      >\r\n                      <i v-if=\"imageParams.type==2\" class=\"el-icon-caret-right play-icon\"></i>\r\n                      <i class=\"el-icon-document\" v-if=\"imageParams.type ==3\"></i>\r\n                      <i class=\"el-icon-check\"></i>\r\n                    </div>\r\n                    <el-row class=\"action\">\r\n                      <el-col :span=\"8\" @click.native=\"preview(item)\">\r\n                        <i class=\"el-icon-zoom-in\"></i>\r\n                      </el-col>\r\n                      <el-col :span=\"8\" @click.native=\"handleCopy(item.data_url ,$event)\">\r\n                        <i class=\"el-icon-share\"></i>\r\n                      </el-col>\r\n                      <el-col :span=\"8\" @click.native=\"deleteItem(item, index)\">\r\n                        <i class=\"el-icon-delete\"></i>\r\n                      </el-col>\r\n                    </el-row>\r\n                  </div>\r\n                  <el-tooltip effect=\"dark\" placement=\"bottom\">\r\n                    <p class=\"ellipsis\">{{item.file_name}}</p>\r\n                    <div slot=\"content\">\r\n                      文件名：{{item.file_name}}\r\n                      <br>\r\n                      大小：{{item.file_size | bytesToSize }}\r\n                    </div>\r\n                  </el-tooltip>\r\n                </div>\r\n              </el-col>\r\n            </el-row>\r\n          </div>\r\n        </div>\r\n        <wm-pagination\r\n          :total=\"total\"\r\n          :page-size=\"imageParams.page_size\"\r\n          v-model=\"imageParams.page\"\r\n          @size-change=\"pageSizeChange\"\r\n          @current-change=\"pageCurrentChange\"\r\n        ></wm-pagination>\r\n      </el-tab-pane>\r\n      <el-tab-pane label=\"本地上传\" name=\"upload\">\r\n        <el-upload\r\n          class=\"upload-demo\"\r\n          drag\r\n          action\r\n          :http-request=\"changeFile\"\r\n          :before-remove=\"removeFile\"\r\n          :file-list=\"uploadFile\"\r\n          :on-change=\"uploadChange\"\r\n          :multiple=\"uploadNum !== 1\"\r\n        >\r\n          <i class=\"el-icon-upload\"></i>\r\n          <div class=\"el-upload__text\">\r\n            将文件拖到此处，或\r\n            <em>点击上传</em>\r\n          </div>\r\n          <!-- <div class=\"el-upload__tip\" slot=\"tip\">只能上传jpg/png文件，且不超过500kb</div> -->\r\n        </el-upload>\r\n      </el-tab-pane>\r\n    </el-tabs>\r\n    <template v-if=\"!isManager\">\r\n      <div v-if=\"activeName === 'material' || (activeName === 'file' && uploadNum === 1) \" slot=\"footer\" class=\"dialog-footer tr\">\r\n        <el-button @click=\"visible=false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"selectOk\">确 定</el-button>\r\n      </div>\r\n    </template>\r\n    <preview :title=\"previewTitle\" v-model=\"previewDialogVisible\" :url=\"previewUrl\" :type=\"previewType\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getMaterialList, addMaterial, deleteMaterial } from '@/api/common/material'\r\nimport { getMediaId } from '@/api/common/file'\r\nimport { bytesToSize, getThumbnail } from '@/utils'\r\nimport WmPagination from '@/components/Pagination'\r\nimport Preview from '@/components/Preview'\r\nimport clip from '@/utils/clipboard'\r\nimport upload from '@/mixins/upload'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      dialogImageUrl: '',\r\n      activeName: 'material',\r\n      dialogVisible: false,\r\n      materialDialogVisible: true,\r\n      previewDialogVisible: false,\r\n      items: [],\r\n      videos: null,\r\n      previewUrl: '',\r\n      previewTitle: '',\r\n      previewType: 1,\r\n      imageParams: {\r\n        key: null,\r\n        per_page: 20,\r\n        page: 1,\r\n        type: this.type,\r\n        sort: 1\r\n      },\r\n      listLoading: false,\r\n      total: 0,\r\n      currentPage: '',\r\n      selects: {},\r\n      curIndex: '',\r\n      uploadFile: [],\r\n      visible: this.value,\r\n      tempFiles: []\r\n    }\r\n  },\r\n  components: { WmPagination, Preview },\r\n  props: {\r\n    value: { type: Boolean, default: false },\r\n    type: { type: Number, default: 1 },\r\n    uploadNum: { type: Number, default: 1 },\r\n    media: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    isManager: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  mixins: [upload],\r\n  created() {\r\n    if (this.items.length === 0) {\r\n      this.loadList()\r\n    }\r\n  },\r\n  methods: {\r\n    /* *** 素材库业务  *** */\r\n    // 加载列表\r\n    loadList(reset = false) {\r\n      reset && (this.imageParams.page = 1)\r\n      this.listLoading = true\r\n      this.selects = {}\r\n      getMaterialList(this.imageParams)\r\n        .then(res => {\r\n          this.searchBtnDisabled = false\r\n          this.listLoading = false\r\n          var data = res.data\r\n          var items = data.data\r\n          for (var i = 0, len = items.length; i < len; i++) {\r\n            items[i].status = false\r\n          }\r\n          this.items = items\r\n          this.total = parseInt(data.total)\r\n          this.currentPage = data.current_page\r\n        })\r\n        .catch(() => {\r\n          this.listLoading = false\r\n          this.items = []\r\n        })\r\n    },\r\n    // 改变每页数量\r\n    pageSizeChange(val) {\r\n      this.imageParams.per_page = val\r\n      this.loadList()\r\n    },\r\n    // 改变页数\r\n    pageCurrentChange(val) {\r\n      this.imageParams.page = val\r\n      this.loadList()\r\n    },\r\n    // 排序\r\n    sort(type) {\r\n      this.imageParams.sort = type\r\n      this.loadList(true)\r\n    },\r\n    // 搜索\r\n    search() {\r\n      this.loadList(true)\r\n      return false\r\n    },\r\n    // 预览\r\n    preview(item) {\r\n      this.previewDialogVisible = true\r\n      this.previewUrl = item.data_url\r\n      this.previewTitle = `${item.file_name}(${bytesToSize(item.file_size)})`\r\n      this.previewType = item.type\r\n    },\r\n    deleteItem(item, index) {\r\n      this.$confirm('你确定要删除该文件吗', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        deleteMaterial(item.id).then(() => {\r\n          this.items.splice(index, 1)\r\n          this.$message.success('删除成功!')\r\n          this.total--\r\n        })\r\n      })\r\n    },\r\n    // 勾选文件\r\n    selectFile(item, index) {\r\n      if (!this.isManager) {\r\n        var status = this.items[index].status\r\n        if (status) {\r\n          // 取消选择\r\n          delete this.selects[index]\r\n        } else {\r\n          // 选择\r\n          if (this.uploadNum > Object.keys(this.selects).length) {\r\n            this.selects[index] = item\r\n          } else {\r\n            if (this.uploadNum === 1) {\r\n              this.selects = {}\r\n              this.selects[index] = item\r\n              this.curIndex !== '' && (this.items[this.curIndex].status = false)\r\n            } else {\r\n              return this.$message.warning(`最多勾选${this.uploadNum}个文件`)\r\n            }\r\n          }\r\n        }\r\n        this.curIndex = index\r\n        this.items[index].status = !status\r\n      }\r\n    },\r\n    // 选择素材\r\n    selectOk() {\r\n      var selectsNum = Object.keys(this.selects).length\r\n      if (this.activeName === 'material') {\r\n        if (!selectsNum) {\r\n          this.$message('请选择文件！')\r\n          return\r\n        }\r\n        var emitData = []\r\n        // 素材库选择\r\n        emitData = Object.values(this.selects)\r\n      } else if (this.activeName === 'upload') {\r\n        // 本地上传\r\n        emitData = this.tempFiles\r\n      }\r\n      console.log('素材库返回数据：', emitData)\r\n      this.visible = false\r\n      this.uploadFile = []\r\n      this.tempFiles = []\r\n      // 判断是否发到微信中单独处理\r\n      if (this.media) {\r\n        this.getMediaIds(emitData)\r\n      } else {\r\n        this.$emit('on-send', emitData)\r\n        this.items.map(v => (v.status = false))\r\n        this.selects = {}\r\n      }\r\n    },\r\n    // 复制地址\r\n    handleCopy(text, event) {\r\n      clip(text, event)\r\n    },\r\n    // 处理素材库\r\n    getMediaIds(emitData) {\r\n      const loading = this.$loading({\r\n        text: '正在处理中...',\r\n        spinner: 'el-icon-loading',\r\n        fullscreen: false,\r\n        background: 'transparent'\r\n      })\r\n      emitData.map((v, i) => {\r\n        getMediaId(emitData[0].id)\r\n          .then(res => {\r\n            console.log(res)\r\n            emitData[i].media_id = res.data.data.media_id\r\n            if (i === emitData.length - 1) {\r\n              this.$emit('on-send', emitData)\r\n              this.items.map(v => (v.status = false))\r\n              this.selects = {}\r\n            }\r\n          })\r\n          .finally(() => {\r\n            i === emitData.length - 1 && loading.close()\r\n          })\r\n      })\r\n    },\r\n\r\n    /* *** 上传业务  *** */\r\n    // 选择附件\r\n    async changeFile(params) {\r\n      var file = params.file\r\n      // console.log(params)\r\n      // 没有选择任何文件 退出\r\n      if (!file) {\r\n        return\r\n      }\r\n      // 判断文件格式是否正确\r\n      let type = this.imageParams.type === 3 ? 'pan' : file.type.split('/')[0]\r\n      if (type === this.getFileType(false)) {\r\n        // 获取上传地址等信息\r\n        // 开始上传到腾讯COS\r\n        if (this.uploadFile.length > this.uploadNum) {\r\n          // 超过上传数量，后续不作处理提示\r\n          this.$message.error(`最多上传${this.uploadNum}个文件，超出的文件本次将不会上传！`)\r\n          this.uploadFile.splice(this.uploadFile.findIndex(v => v.name === file.name), 1)\r\n        } else {\r\n          var fileItem = await this.uploadTecent(file)\r\n          fileItem && this.uploadSuccess(fileItem)\r\n        }\r\n      } else {\r\n        this.$message.error('你上传的文件格式不正确，请重新上传')\r\n        this.uploadFile.splice(this.uploadFile.findIndex(v => v.name === file.name), 1)\r\n      }\r\n    },\r\n    exceedTip() {},\r\n    // 获得文件类型\r\n    getFileType(flag = true) {\r\n      switch (this.imageParams.type) {\r\n        case 1:\r\n          return flag ? 'img' : 'image'\r\n        case 2:\r\n          return 'video'\r\n        case 3:\r\n          return 'pan'\r\n        default:\r\n          return null\r\n      }\r\n    },\r\n    getThumbnail,\r\n    // 上传文件\r\n    uploadChange(file, fileList) {\r\n      this.uploadFile = fileList\r\n    },\r\n    // 正在上传中...\r\n    uploading(progressData) {\r\n      var index = this.uploadFile.length - 1\r\n      this.uploadFile[index].percentage = progressData.percent * 100\r\n      this.uploadFile[index].status = 'uploading'\r\n    },\r\n    // 文件上传成功\r\n    uploadSuccess(fileItem) {\r\n      addMaterial(fileItem).then(res => {\r\n        fileItem.data_url = res.data.data.data_url\r\n        this.tempFiles.push(fileItem)\r\n        if (this.tempFiles.length === this.uploadFile.length) {\r\n          // 文件全部上传成功选择回调\r\n          this.selectOk(false)\r\n        }\r\n      })\r\n    }\r\n  },\r\n  filters: {\r\n    bytesToSize(val) {\r\n      return bytesToSize(val)\r\n    }\r\n  },\r\n  watch: {\r\n    visible(val) {\r\n      this.$emit('input', val)\r\n    },\r\n    value(val) {\r\n      this.visible = val\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n$primary-color: #c7000a;\r\n\r\n.wm-preview {\r\n  text-align: center;\r\n  img,\r\n  video {\r\n    max-width: 100%;\r\n    max-height: 100%;\r\n  }\r\n}\r\n\r\n.wm-files {\r\n  height: 470px;\r\n  overflow: auto;\r\n  overflow-x: hidden;\r\n  &.manager {\r\n    height: auto;\r\n  }\r\n  .item {\r\n    border: 1px solid #ddd;\r\n    margin-bottom: 10px;\r\n    position: relative;\r\n    &:hover {\r\n      .file {\r\n        border-color: $primary-color;\r\n      }\r\n      .el-checkbox,\r\n      .action {\r\n        display: block;\r\n      }\r\n    }\r\n    .el-checkbox {\r\n      position: absolute;\r\n      right: 5px;\r\n      top: 5px;\r\n      display: none;\r\n    }\r\n    .is-checked {\r\n      display: inline-block;\r\n    }\r\n    .play-icon {\r\n      position: absolute;\r\n      left: 0;\r\n      right: 0;\r\n      top: 45px;\r\n      font-size: 24px;\r\n      color: white;\r\n      text-align: center;\r\n      line-height: 30px;\r\n      width: 30px;\r\n      height: 30px;\r\n      border-radius: 50%;\r\n      background-color: #0000009e;\r\n      margin: auto;\r\n      cursor: pointer;\r\n    }\r\n    .action {\r\n      position: absolute;\r\n      bottom: 0;\r\n      left: 0;\r\n      right: 0;\r\n      background-color: #000000b5;\r\n      color: white;\r\n      display: none;\r\n      font-size: 16px;\r\n      i {\r\n        line-height: 30px;\r\n        cursor: pointer;\r\n        padding: 0 5px;\r\n        &:hover {\r\n          color: #d7d7d7;\r\n          transition: cubic-bezier(0.075, 0.82, 0.165, 1);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .file {\r\n    height: 145px;\r\n    text-align: center;\r\n    overflow: hidden;\r\n    position: relative;\r\n    > div {\r\n      // vertical-align: top;\r\n    }\r\n    // &::before {\r\n    //   content: '';\r\n    //   display: inline-block;\r\n    //   vertical-align: middle;\r\n    //   height: 100%;\r\n    // }\r\n    .el-icon-check {\r\n      display: none;\r\n      background-color: white;\r\n    }\r\n    .checked {\r\n      .el-icon-check {\r\n        display: block;\r\n        position: absolute;\r\n        width: 100%;\r\n        text-align: center;\r\n        color: white;\r\n        font-size: 50px;\r\n        top: 0;\r\n        bottom: 0;\r\n        background-color: #000000b5;\r\n        line-height: 145px;\r\n        transition: 0.3s;\r\n      }\r\n    }\r\n    img {\r\n      max-width: 100%;\r\n      max-height: 100%;\r\n    }\r\n    video {\r\n      max-width: 95%;\r\n      max-height: 100%;\r\n    }\r\n    .el-icon-document {\r\n      font-size: 40px;\r\n      color: #999;\r\n      margin-top: 40px;\r\n    }\r\n  }\r\n  p {\r\n    padding: 0 5px;\r\n    cursor: default;\r\n  }\r\n}\r\n// .wm-material-dialog {\r\n// }\r\n\r\n.input-with-select {\r\n  .el-input-group__prepend {\r\n    background-color: #fff;\r\n  }\r\n  .el-select .el-input {\r\n    width: 75px;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=53c18f49&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export default {\r\n  inserted: bgChange,\r\n  update: bgChange\r\n}\r\n\r\nfunction bgChange(el) {\r\n  var url = el.dataset.url\r\n  if (url) {\r\n    el.style.backgroundImage = `url(${url})`\r\n    el.style.backgroundSize = 'cover'\r\n    el.style.backgroundPosition = 'center'\r\n  }\r\n}\r\n","<template>\r\n  <div class=\"wm-upload\">\r\n    <span @click=\"materialVisible = true\" v-if=\"fileList.length != uploadNum && isUpload\">\r\n      <div class=\"el-upload el-upload--picture-card\" v-if=\" type<3\">\r\n        <i class=\"el-icon-plus\"></i>\r\n      </div>\r\n      <el-button v-else-if=\"type!==1\" size=\"mini\">选择文件</el-button>\r\n    </span>\r\n    <ul class=\"el-upload-list\" :class=\"type<3? 'el-upload-list--picture-card':'el-upload-list--text'\">\r\n      <li\r\n        tabindex=\"0\"\r\n        class=\"el-upload-list__item is-success\"\r\n        v-for=\"(item, index) in fileList\"\r\n        v-bg\r\n        :data-url=\"type < 3 ? getThumbnail( type === 1 ? item : '', {q_t:5}) : ''\"\r\n        :key=\"item\"\r\n      >\r\n        <a class=\"el-upload-list__item-name\" @click=\"videoPreview(item, index)\">\r\n          <i class=\"el-icon-document\"></i>\r\n        </a>\r\n        <label class=\"el-upload-list__item-status-label\">\r\n          <i class=\"el-icon-upload-success el-icon-check\"></i>\r\n        </label>\r\n        <i class=\"el-icon-close\" v-if=\"isUpload\" @click=\"removeFile(item,index)\"></i>\r\n        <i class=\"el-icon-close-tip\">按 delete 键可删除</i>\r\n        <!---->\r\n        <span class=\"el-upload-list__item-actions\">\r\n          <span class=\"el-upload-list__item-preview\" @click=\"pictureCardPreview(item, index)\">\r\n            <i class=\"el-icon-zoom-in\"></i>\r\n          </span>\r\n          <span v-if=\"isUpload\" class=\"el-upload-list__item-delete\" @click=\"removeFile(item,index)\">\r\n            <i class=\"el-icon-delete\"></i>\r\n          </span>\r\n        </span>\r\n      </li>\r\n    </ul>\r\n    <el-dialog append-to-body title=\"选择文件\" top=\"10vh\" :visible.sync=\"materialVisible\" width=\"990px\">\r\n      <material v-model=\"materialVisible\" @on-send=\"materialSend\" :type=\"type\" :upload-num=\"uploadNum - fileList.length\" :media=\"media\"></material>\r\n    </el-dialog>\r\n\r\n    <preview v-model=\"previewVisible\" :url=\"previewUrl\" :type=\"type\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Material from '@/components/Material'\r\nimport { getThumbnail } from '@/utils'\r\nimport Preview from '@/components/Preview'\r\nimport bg from '@/directives/imgBg'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      previewVisible: false,\r\n      materialVisible: false,\r\n      previewUrl: '',\r\n      tempFiles: this.value || ''\r\n    }\r\n  },\r\n  directives: {\r\n    bg\r\n  },\r\n  props: {\r\n    type: {\r\n      type: Number,\r\n      default: 1\r\n    },\r\n    value: {\r\n      type: [Array, String],\r\n      default: null\r\n    },\r\n    uploadNum: {\r\n      type: Number,\r\n      default: 1\r\n    },\r\n    media: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    isUpload: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    multiple: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  components: { Material, Preview },\r\n  methods: {\r\n    getThumbnail,\r\n    // 素材框 确定选择 返回数据\r\n    materialSend(data) {\r\n      console.log(data)\r\n      if (this.multiple) {\r\n        var urls = data.map(v => v.data_url)\r\n        this.tempFiles = this.tempFiles.concat(urls)\r\n      } else {\r\n        this.tempFiles = data[0].data_url\r\n      }\r\n    },\r\n    // 删除文件\r\n    removeFile(item, index) {\r\n      if (this.multiple) {\r\n        this.tempFiles.splice(index, 1)\r\n      } else {\r\n        this.tempFiles = ''\r\n      }\r\n    },\r\n    pictureCardPreview(item) {\r\n      this.previewUrl = item\r\n      this.previewVisible = true\r\n    },\r\n    videoPreview(item) {\r\n      if (this.type === 2) {\r\n        this.previewUrl = item\r\n        this.previewVisible = true\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    fileList() {\r\n      var fileList = []\r\n      if (this.multiple && this.tempFiles) {\r\n        this.tempFiles.map((v, i) => {\r\n          fileList[i] = v\r\n        })\r\n      } else {\r\n        fileList = this.tempFiles ? [this.tempFiles] : []\r\n      }\r\n      return fileList\r\n    }\r\n  },\r\n  watch: {\r\n    value(val) {\r\n      this.tempFiles = val || ''\r\n    },\r\n    tempFiles(val) {\r\n      this.$emit('input', val)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.wm-upload {\r\n  .el-upload-list--text {\r\n    .el-upload-list__item-actions {\r\n      display: none;\r\n    }\r\n  }\r\n}\r\n.preview {\r\n  img {\r\n    max-width: 100%;\r\n    max-height: 100%;\r\n  }\r\n  .el-dialog {\r\n    text-align: center;\r\n    margin-bottom: 0;\r\n    height: 96%;\r\n    margin-top: 10px;\r\n  }\r\n  .el-dialog__body {\r\n    padding: 0;\r\n    height: 88%;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=071946b1&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div id=\"app\">\n    <upload v-model=\"src\" />\n  </div>\n</template>\n\n<script>\nimport Upload from \"@/components/Upload/index.vue\";\nexport default {\n  name: \"app\",\n  data() {\n    return {\n      src:\n        \"https://5b0988e595225.cdn.sohucs.com/images/20191023/081ff180cc7d438cb45b5d74828a264e.jpeg\",\n    };\n  },\n  components: {\n    Upload,\n  },\n};\n</script>\n\n<style>\n#app {\n  font-family: \"Avenir\", Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=1080252a&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport Element from 'element-ui'\nimport 'element-ui/lib/theme-chalk/index.css'\n\nVue.use(Element)\n","import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport './plugins/element.js'\r\n\r\nVue.config.productionTip = false\r\n\r\nnew Vue({\r\n  render: h => h(App),\r\n}).$mount('#app')\r\n","module.exports = __webpack_public_path__ + \"img/video_cover.b756ca67.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}